let timerId;const objStockholderCopy={stockholderCreate:"51104056421913253057301041600838205943112627602261514958403702040404",stockholderRenewal:"51165156543932094718200110072404200454551323423914614534464303060607",stockholderSend:"51195740182519272434091445301752375109572008040415405147221404060608",stockholderMake:"51275332565428174718234002544824271005555738120106425146062805060607",stockholderHero:"51142233152404041440344215520617432909355516240124295922373106060707",stockholderEquipment:"51122022274218154832082325395954460701424631454047184253385207010702",stockholderTrading:"51151937321949136060044355314337081038162743231408433416593408080708",stockholderUpOperate:"51115342065339076025013252471214522501133349160837594626204209080809",stockholderTeam:"51125905370553042706040517270351220324511648091309150125585543595959",stockholderJoinWar:"51174633341304200236571660125818334957600356181451140731351530606060",stockholderFight:"51165954280110374618456102595708264357064913143334224227105218353535"},objStockholder={stockholderCreate:"",stockholderRenewal:"",stockholderSend:"",stockholderMake:"",stockholderHero:"",stockholderEquipment:"",stockholderTrading:"",stockholderUpOperate:"",stockholderTeam:"",stockholderJoinWar:"",stockholderFight:""},objGasMoney={CreatePeople:"10.00000000",renewal:"",sendSilverCoin:"0.01000000",sendRefinedIron:"0.01000000",sendVodka:"0.01000000",makeRefinedIron:"0.01000000",makeVodka:"0.01000000",makeSilverCoin:"1000.00000000",createHero:"0.01000000",setHero:"0.01000000",makeEquipment:"0.01000000",setEquipment:"0.01000000",sell:"0.01000000",buy:"0.01000000",rm:"1.00000000",RUpgrade:"0.01000000",team:"0.01000000",joinWar:"0.01000000"};let resultCreate=[],resultRenewal=[],resultSend=[],resultMake=[],resultHero=[],resultEquipment=[],resultTrading=[],resultUpOperate=[],resultTeam=[],resultJoinWar=[],resultFight=[];for(let e=0;e<objStockholderCopy.stockholderCreate.length;e+=2){let t=objStockholderCopy.stockholderCreate.substring(e,e+2);resultCreate.push(t);let o=objStockholderCopy.stockholderRenewal.substring(e,e+2);resultRenewal.push(o);let r=objStockholderCopy.stockholderSend.substring(e,e+2);resultSend.push(r);let n=objStockholderCopy.stockholderMake.substring(e,e+2);resultMake.push(n);let a=objStockholderCopy.stockholderHero.substring(e,e+2);resultHero.push(a);let i=objStockholderCopy.stockholderEquipment.substring(e,e+2);resultEquipment.push(i);let s=objStockholderCopy.stockholderTrading.substring(e,e+2);resultTrading.push(s);let h=objStockholderCopy.stockholderUpOperate.substring(e,e+2);resultUpOperate.push(h);let p=objStockholderCopy.stockholderTeam.substring(e,e+2);resultTeam.push(p);let l=objStockholderCopy.stockholderJoinWar.substring(e,e+2);resultJoinWar.push(l);let d=objStockholderCopy.stockholderFight.substring(e,e+2);resultFight.push(d)}let goAddresCreate="",goAddresRenewal="",goAddresSend="",goAddresMake="",goAddresHero="",goAddresEquipment="",goAddresTrading="",goAddresUpOperate="",goAddresTeam="",goAddresJoinWar="",goAddresFight="";for(let e=0;e<resultCreate.length;e++)goAddresCreate+=intToStrUtlis_aA(resultCreate[e]),goAddresRenewal+=intToStrUtlis_aA(resultRenewal[e]),goAddresSend+=intToStrUtlis_aA(resultSend[e]),goAddresMake+=intToStrUtlis_aA(resultMake[e]),goAddresHero+=intToStrUtlis_aA(resultHero[e]),goAddresEquipment+=intToStrUtlis_aA(resultEquipment[e]),goAddresTrading+=intToStrUtlis_aA(resultTrading[e]),goAddresUpOperate+=intToStrUtlis_aA(resultUpOperate[e]),goAddresTeam+=intToStrUtlis_aA(resultTeam[e]),goAddresJoinWar+=intToStrUtlis_aA(resultJoinWar[e]),goAddresFight+=intToStrUtlis_aA(resultFight[e]);function JSONconvert(e){return JSON.stringify(e,(e,t)=>"number"==typeof t||"boolean"==typeof t?String(t):t)}function executeEverySecond(){if(g_phpLoadDdata.accountDatNum++,g_phpLoadDdata.isUpdateHeight){let e=g_phpDataManager.getPhpBlockHeight(),t=g_phpDataManager.getPhpOnlineBlockHeight();g_phpLoadDdata.accountDatNum%1==0&&t-e>6?getQParameter("getBlock","&height="+(e+1),e+1):g_phpLoadDdata.accountDatNum%3==0&&t-e>=1?getQParameter("getBlock","&height="+(e+1),e+1):g_phpLoadDdata.accountDatNum%7==0&&t-e<1&&getQParameter("getBlock","&height="+(e+1),e+1)}timerId=setTimeout(executeEverySecond,1700)}function removeTimeout(e){clearTimeout(e)}function getQParameter(e,t,o){let r=`https://main1.phpcoin.net/api.php?q=${e}`;null!=t&&(r=`https://main1.phpcoin.net/api.php?q=${e}${t}`),this.fetchData(r).then(r=>{if("ok"==r.status){let a=Number(o)%100-34;if(a>=1&&a<=64&&(g_phpLoadDdata.isUpdateHeight=!1),null!=t){let e=new Array;var n={id:r.data.id,height:r.data.height,date:r.data.date,data:e};for(let n in r.data.data)e.push(r.data.data[n]);n.data=e;let t=JSONconvert(n);g_phpLoadDdata.currentBlockHeigth++;let o=g_phpDataManager.getPhpBlockHeight();g_phpDataManager.getPhpOnlineBlockHeight()<=o&&"home"==utlisGetScene()&&(g_phpDataManager.setPhpOnlineBlockHeight(o+1),g_phpHome.setCurrentOnlineHeight(o+0,o+0));const a={type:"10000",other:g_phpDataManager.getAddress(),content:t,time:new Date};return g_SqliteData.sendChat(a),r}"currentBlock"==e&&(g_phpLoadDdata.onlineBlockHeigth=r.data.height)}else if("Invalid block"==r.data){let e=g_phpDataManager.getPhpBlockHeight(),o=g_phpDataManager.getPhpOnlineBlockHeight();null!=t&&o<=e&&"home"==utlisGetScene()&&(g_phpDataManager.setPhpOnlineBlockHeight(e),g_phpHome.setCurrentOnlineHeight(e+0,e+0))}}).catch(e=>{console.error("Error:",e)})}function utlisGetScene(){return currentScene=g_phpDataManager.getIsScene(),""==currentScene&&(window.g_loginPHP?currentScene="loginPHP":window.g_phpHome?currentScene="home":window.g_game&&(currentScene="game")),currentScene}async function fetchData(e){try{const o=await fetch(e);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(t){console.error("Fetching error:",t)}}function amountSufficient(e){return!(parseFloat(g_phpDataManager.getPhpCoinBalance())<parseFloat(e)&&("loginPHP"==utlisGetScene()?g_loginPHP.showSpriteNode(["UTLISSQL_MSGS_1001"],!0,!1,3):"home"==utlisGetScene()?g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1001"],!0,!1,3):"game"==utlisGetScene()&&g_game.showSpriteNode(["UTLISSQL_MSGS_1001"],!0,!1,3),1))}function sendChoice(e,t,o){let r="0.00000000";if("1"==e){let t='{"p":"prc-100","op":"CreatePeople"}';if(r=objGasMoney.CreatePeople,!this.amountSufficient(r))return;"loginPHP"==utlisGetScene()&&g_loginPHP.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),g_loginPHP.showGoHomeNode(),this.sendPHPData(e,t,r,objStockholder.stockholderCreate)}else if("21"==e){const t=`{"p":"prc-100","op":"sell","ot":"${o[0]}","pt":"${o[1]}","ptn":"${o[2]}","gt":"${o[3]}","gtn":"${o[4]}"}`;if(r=objGasMoney.sell,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderTrading)}else if("22"==e){const t=`{"p":"prc-100","op":"rm","ot":"${o[0]}","co":"${o[1]}"}`;if(r=objGasMoney.rm,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderTrading)}else if("23"==e){const t=`{"p":"prc-100","op":"buy","ot":"${o[0]}","bo":"${o[1]}"}`;if(r=objGasMoney.buy,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderTrading)}else if("24"==e){const t=`{"p":"prc-100","op":"sell","ot":"${o[0]}","oh":"${o[2]}","sc":"${o[1]}"}`;if(r=objGasMoney.sell,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderTrading)}else if("27"==e){const t=`{"p":"prc-100","op":"sell","ot":"${o[0]}","oh":"${o[2]}","sc":"${o[1]}"}`;if(r=objGasMoney.sell,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderTrading)}else if("20001"==e){const t='{"p":"prc-100","op":"RUpgrade","bt":"1"}';if(r=objGasMoney.RUpgrade,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderUpOperate)}else if("20002"==e){const t='{"p":"prc-100","op":"RUpgrade","bt":"2"}';if(r=objGasMoney.RUpgrade,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderUpOperate)}else if("20003"==e){const t='{"p":"prc-100","op":"RUpgrade","bt":"3"}';if(r=objGasMoney.RUpgrade,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderUpOperate)}else if("20004"==e){const t='{"p":"prc-100","op":"RUpgrade","bt":"4"}';if(r=objGasMoney.RUpgrade,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderUpOperate)}else if("21001"==e){const t='{"p":"prc-100","op":"createHero"}';if(r=objGasMoney.createHero,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderHero)}else if("21002"==e){if(void 0===t)return;let o='{"p":"prc-100","op":"setHero","tick":"'+g_phpHome.selectHeroHash+'","amt":"'+t+'"}';if(r=objGasMoney.setHero,!this.amountSufficient(r))return;if("home"==utlisGetScene()){g_phpHome.hideHeroDetailedNode(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10);for(let e=0;e<g_phpHome.m_warriorNodeContent.children.length;e++)g_phpHome.m_warriorNodeContent.children[e].heroHash==g_phpHome.selectHeroHash&&(g_phpHome.m_warriorNodeContent.children[e].heroFight=!0,g_phpHome.m_warriorNodeContent.getChildByName("isFightLabel"))}this.sendPHPData(e,o,r,objStockholder.stockholderHero)}else if("22001"==e){const t='{"p":"prc-100","op":"makeEquipment"}';if(r=objGasMoney.makeEquipment,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderEquipment)}else if("22002"==e){let t='{"p":"prc-100","op":"setEquipment","tick":"'+g_phpHome.selectEquipmentHash+'"}';if(r=objGasMoney.setEquipment,!this.amountSufficient(r))return;"home"==utlisGetScene()&&(g_phpHome.hideEquipmentDetailedNode(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10)),this.sendPHPData(e,t,r,objStockholder.stockholderEquipment)}else if("30001"==e){let t='{"p":"prc-100","op":"makeSilverCoin"}';if(r=objGasMoney.makeSilverCoin,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderMake)}else if("30002"==e){let t='{"p":"prc-100","op":"makeRefinedIron"}';if(r=objGasMoney.makeRefinedIron,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderMake)}else if("30003"==e){let t='{"p":"prc-100","op":"makeVodka"}';if(r=objGasMoney.makeVodka,!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,t,r,objStockholder.stockholderMake)}else if("31001"==e){let t=`{"p":"prc-100","op":"sendSilverCoin","h":"${o[0]}","a":"${o[1]}"}`;if(r=objGasMoney.sendSilverCoin,!this.amountSufficient(r))return;"home"==utlisGetScene()&&(g_phpHome.clearEditBoxCoin(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10)),this.sendPHPData(e,t,r,objStockholder.stockholderSend)}else if("31002"==e){let t=`{"p":"prc-100","op":"sendRefinedIron","h":"${o[0]}","a":"${o[1]}"}`;if(r=objGasMoney.sendRefinedIron,!this.amountSufficient(r))return;"home"==utlisGetScene()&&(g_phpHome.clearEditBoxIron(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10)),this.sendPHPData(e,t,r,objStockholder.stockholderSend)}else if("31003"==e){let t=`{"p":"prc-100","op":"sendVodka","h":"${o[0]}","a":"${o[1]}"}`;if(r=objGasMoney.sendVodka,!this.amountSufficient(r))return;"home"==utlisGetScene()&&(g_phpHome.clearEditBoxVodka(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10)),this.sendPHPData(e,t,r,objStockholder.stockholderSend)}else if("40000"==e){let t='{"p":"prc-100","op":"team","f":"'+JSON.stringify(o)+'"}';if(r=objGasMoney.team,!this.amountSufficient(r))return;"home"==utlisGetScene()&&(g_phpHome.hideEquipmentDetailedNode(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10)),this.sendPHPData(e,t,r,objStockholder.stockholderTeam)}else if("70000"==e){let n='{"p":"prc-100","op":"joinWar","t":"'+t+'","w":"'+o[0]+'"}';if(r=objGasMoney.joinWar,!this.amountSufficient(r))return;"home"==utlisGetScene()&&(g_phpHome.hideWorldInfoNode(),g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10)),this.sendPHPData(e,n,r,objStockholder.stockholderJoinWar)}else if("123456"==e){const o='{"p":"prc-100","op":"renewal"}';let n=g_phpDataManager.getIndexStartPay();if(r=1e3-50*Math.floor((Number(t)-n)/525600)+".00000000",!this.amountSufficient(r))return;"home"==utlisGetScene()&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1002"],!0,!1,10),this.sendPHPData(e,o,r,objStockholder.stockholderRenewal)}g_phpDataManager.setPhpCoinBalance(parseFloat(g_phpDataManager.getPhpCoinBalance()).toFixed(3)-parseInt(r)),"home"==utlisGetScene()&&g_phpHome.setResourceTokenCoinData()}function getCurrentBlockHeight(){g_phpHome.showSpriteNode(["LOGIN_MSGS_1002"],!1,!1,0),this.fetchData("https://main1.phpcoin.net/api.php?q=currentBlock").then(e=>{"ok"==e.status&&sendChoice("123456",""+e.data.height,[])}).catch(e=>{console.error("Error:",e)})}function getStartBlockHeight(e){this.fetchData("https://main1.phpcoin.net/api.php?q=currentBlock").then(t=>{"ok"==t.status&&(t.data.height>=e?g_loginPHP.hideGameCountdown():(g_loginPHP.m_numStartLabel.string=parseInt(e)-parseInt(t.data.height),g_loginPHP.showGameCountdown()))}).catch(e=>{console.error("Error:",e)})}function sendPHPData(e,t,o,r){const n=Date.now();let a=Math.floor(n/1e3),i={val:o,src:g_phpDataManager.getAddress(),dst:r,public_key:g_phpDataManager.getPublicKey(),fee:"0.00000000",signature:"",date:a,message:t,type:1},s="00"+i.val+"-"+i.fee+"-"+i.dst+"-"+i.message+"-"+i.type+"-"+i.public_key+"-"+i.date,h="";"loginPHP"==utlisGetScene()?h=g_loginPHP.getPhpcoinCryptoSign(s,g_phpDataManager.getPrivateKey()):"home"==utlisGetScene()?h=g_phpHome.getPhpcoinCryptoSign(s,g_phpDataManager.getPrivateKey()):window.g_loginPHP?h=g_loginPHP.getPhpcoinCryptoSign(s,g_phpDataManager.getPrivateKey()):window.g_phpHome&&(h=g_phpHome.getPhpcoinCryptoSign(s,g_phpDataManager.getPrivateKey())),i.signature=h,fetch("https://main1.phpcoin.net/api.php?q=sendTransactionJson",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}, statusText: ${t.statusText}`);return"1"==e&&("loginPHP"==utlisGetScene()?(g_loginPHP.showSpriteNode(["UTLISSQL_MSGS_1003"],!0,!1,10),g_loginPHP.executeHome()):"home"==utlisGetScene()?g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1003"],!0,!1,10):window.g_loginPHP?(g_loginPHP.showSpriteNode(["UTLISSQL_MSGS_1003"],!0,!1,10),g_loginPHP.executeHome()):window.g_phpHome&&g_phpHome.showSpriteNode(["UTLISSQL_MSGS_1003"],!0,!1,10)),t.json()}).then(e=>console.log(e)).catch(e=>console.error("Fetch error:",e))}objStockholder.stockholderCreate=goAddresCreate,objStockholder.stockholderRenewal=goAddresRenewal,objStockholder.stockholderSend=goAddresSend,objStockholder.stockholderMake=goAddresMake,objStockholder.stockholderHero=goAddresHero,objStockholder.stockholderEquipment=goAddresEquipment,objStockholder.stockholderTrading=goAddresTrading,objStockholder.stockholderUpOperate=goAddresUpOperate,objStockholder.stockholderTeam=goAddresTeam,objStockholder.stockholderJoinWar=goAddresJoinWar,objStockholder.stockholderFight=goAddresFight,Object.freeze(objStockholder);